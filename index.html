<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Game - Con Selector de CategorÃ­as</title>

<style>
/* ... (mantÃ©n el mismo CSS que antes) ... */

.controls {
  margin: 15px 0 20px;
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
}

.category-selector {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-bottom: 15px;
  flex-wrap: wrap;
}

.category-btn {
  padding: 8px 16px;
  border-radius: 20px;
  border: 2px solid transparent;
  background: rgba(255, 255, 255, 0.1);
  color: white;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 600;
}

.category-btn:hover {
  background: rgba(251, 191, 36, 0.2);
  transform: translateY(-2px);
}

.category-btn.active {
  background: linear-gradient(135deg, #6366f1, #9333ea);
  border-color: #fbbf24;
  box-shadow: 0 4px 12px rgba(147, 51, 234, 0.3);
}
</style>
</head>

<body>

<h1>ğŸ§  Memory Game</h1>

<div class="game-header">
  <!-- Selector de CategorÃ­as -->
  <div class="category-selector">
    <button class="category-btn active" data-category="emojis">ğŸ˜Š Emojis</button>
    <button class="category-btn" data-category="animales">ğŸ¶ Animales</button>
    <button class="category-btn" data-category="comida">ğŸ• Comida</button>
    <button class="category-btn" data-category="deportes">âš½ Deportes</button>
    <button class="category-btn" data-category="banderas">ğŸš© Banderas</button>
  </div>
  
  <div class="controls">
    <select id="levelSelect">
      <option value="1">Nivel FÃ¡cil (3x2) <span class="level-indicator level-easy">6 Cartas</span></option>
      <option value="2">Nivel Medio (4x3) <span class="level-indicator level-medium">12 Cartas</span></option>
      <option value="3" selected>Nivel DifÃ­cil (6x3) <span class="level-indicator level-hard">18 Cartas</span></option>
    </select>
    <button id="restartBtn">ğŸ”„ Reiniciar Juego</button>
  </div>
  
  <div class="stats-container">
    <div class="stat">
      Movimientos: <span id="moves" class="stat-value">0</span>
    </div>
    <div class="stat">
      Tiempo: <span id="timer" class="stat-value">00:00</span>
    </div>
    <div class="stat">
      Pares: <span id="pairs" class="stat-value">0/9</span>
    </div>
  </div>
</div>

<div class="board-container">
  <div id="board" class="board level-3"></div>
</div>

<div id="modal" class="modal">
  <div class="dialog">
    <h2 id="modalTitle">Â¡Bienvenido al Memory Game!</h2>
    <p id="modalText">Selecciona una categorÃ­a y un nivel para comenzar.</p>
    <button id="closeModalBtn">ğŸ® Comenzar Juego</button>
  </div>
</div>

<script>
/* =================== JAVASCRIPT CON CATEGORÃAS =================== */
document.addEventListener("DOMContentLoaded", () => {
  // Elementos del DOM
  const board = document.getElementById("board");
  const levelSelect = document.getElementById("levelSelect");
  const restartBtn = document.getElementById("restartBtn");
  const movesEl = document.getElementById("moves");
  const timerEl = document.getElementById("timer");
  const pairsEl = document.getElementById("pairs");
  const categoryBtns = document.querySelectorAll(".category-btn");
  
  const modal = document.getElementById("modal");
  const modalTitle = document.getElementById("modalTitle");
  const modalText = document.getElementById("modalText");
  const closeModalBtn = document.getElementById("closeModalBtn");
  
  // BASE DE DATOS DE IMÃGENES POR CATEGORÃA
  const imageCategories = {
    emojis: [
      "https://cdn-icons-png.flaticon.com/128/2583/2583434.png", // Estrella
      "https://cdn-icons-png.flaticon.com/128/2583/2583514.png", // CorazÃ³n
      "https://cdn-icons-png.flaticon.com/128/2583/2583510.png", // Sol
      "https://cdn-icons-png.flaticon.com/128/2583/2583438.png", // Luna
      "https://cdn-icons-png.flaticon.com/128/2583/2583452.png", // Nube
      "https://cdn-icons-png.flaticon.com/128/2583/2583414.png", // Flor
      "https://cdn-icons-png.flaticon.com/128/2583/2583474.png", // Copa
      "https://cdn-icons-png.flaticon.com/128/2583/2583403.png", // Campana
      "https://cdn-icons-png.flaticon.com/128/2583/2583457.png"  // Regalo
    ],
    
    animales: [
      "https://cdn-icons-png.flaticon.com/128/1998/1998610.png", // Gato
      "https://cdn-icons-png.flaticon.com/128/1998/1998618.png", // Perro
      "https://cdn-icons-png.flaticon.com/128/3069/3069172.png", // LeÃ³n
      "https://cdn-icons-png.flaticon.com/128/3069/3069184.png", // Elefante
      "https://cdn-icons-png.flaticon.com/128/3069/3069196.png", // PÃ¡jaro
      "https://cdn-icons-png.flaticon.com/128/3069/3069205.png", // Pez
      "https://cdn-icons-png.flaticon.com/128/3082/3082383.png", // Mariposa
      "https://cdn-icons-png.flaticon.com/128/3082/3082384.png", // Abeja
      "https://cdn-icons-png.flaticon.com/128/3082/3082385.png"  // Tortuga
    ],
    
    comida: [
      "https://cdn-icons-png.flaticon.com/128/3082/3082386.png", // Manzana
      "https://cdn-icons-png.flaticon.com/128/3082/3082387.png", // Banana
      "https://cdn-icons-png.flaticon.com/128/3082/3082388.png", // Naranja
      "https://cdn-icons-png.flaticon.com/128/3082/3082389.png", // Uvas
      "https://cdn-icons-png.flaticon.com/128/3082/3082390.png", // Fresa
      "https://cdn-icons-png.flaticon.com/128/3082/3082391.png", // Pizza
      "https://cdn-icons-png.flaticon.com/128/3082/3082392.png", // Hamburguesa
      "https://cdn-icons-png.flaticon.com/128/3082/3082393.png", // Helado
      "https://cdn-icons-png.flaticon.com/128/3082/3082394.png"  // Pastel
    ],
    
    deportes: [
      "https://cdn-icons-png.flaticon.com/128/857/857455.png",   // FÃºtbol
      "https://cdn-icons-png.flaticon.com/128/857/857462.png",   // Baloncesto
      "https://cdn-icons-png.flaticon.com/128/857/857419.png",   // Tenis
      "https://cdn-icons-png.flaticon.com/128/857/857455.png",   // BÃ©isbol
      "https://cdn-icons-png.flaticon.com/128/857/857492.png",   // NataciÃ³n
      "https://cdn-icons-png.flaticon.com/128/857/857455.png",   // Ciclismo
      "https://cdn-icons-png.flaticon.com/128/857/857519.png",   // EsquÃ­
      "https://cdn-icons-png.flaticon.com/128/857/857500.png",   // Golf
      "https://cdn-icons-png.flaticon.com/128/857/857418.png"    // Boxeo
    ],
    
    banderas: [
      "https://cdn-icons-png.flaticon.com/128/197/197571.png",   // EspaÃ±a
      "https://cdn-icons-png.flaticon.com/128/197/197484.png",   // Argentina
      "https://cdn-icons-png.flaticon.com/128/197/197375.png",   // MÃ©xico
      "https://cdn-icons-png.flaticon.com/128/197/197576.png",   // USA
      "https://cdn-icons-png.flaticon.com/128/197/197517.png",   // Francia
      "https://cdn-icons-png.flaticon.com/128/197/197582.png",   // Italia
      "https://cdn-icons-png.flaticon.com/128/197/197608.png",   // Brasil
      "https://cdn-icons-png.flaticon.com/128/197/197604.png",   // JapÃ³n
      "https://cdn-icons-png.flaticon.com/128/197/197593.png"    // Alemania
    ]
  };
  
  // ConfiguraciÃ³n de niveles
  const levels = {
    1: { pairs: 3, cols: 3, rows: 2, total: 6 },
    2: { pairs: 6, cols: 4, rows: 3, total: 12 },
    3: { pairs: 9, cols: 6, rows: 3, total: 18 }
  };
  
  // Variables del juego
  let firstCard = null;
  let lockBoard = false;
  let moves = 0;
  let matches = 0;
  let seconds = 0;
  let timer = null;
  let gameStarted = false;
  let currentCategory = "emojis"; // CategorÃ­a por defecto
  
  // Formatear tiempo
  function formatTime(seconds) {
    const minutes = String(Math.floor(seconds / 60)).padStart(2, "0");
    const secs = String(seconds % 60).padStart(2, "0");
    return ${minutes}:${secs};
  }
  
  // Mezclar array
  function shuffleArray(array) {
    const shuffled = [...array];
    for (let i = shuffled.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
  }
  
  // Actualizar contador de pares
  function updatePairs() {
    const level = parseInt(levelSelect.value);
    pairsEl.textContent = ${matches}/${levels[level].pairs};
  }
  
  // Cambiar categorÃ­a
  function changeCategory(category) {
    // Actualizar botones activos
    categoryBtns.forEach(btn => {
      if (btn.dataset.category === category) {
        btn.classList.add("active");
      } else {
        btn.classList.remove("active");
      }
    });
    
    // Cambiar categorÃ­a actual
    currentCategory = category;
    
    // Reiniciar juego con nueva categorÃ­a
    if (gameStarted && moves > 0) {
      if (confirm(Â¿Cambiar a categorÃ­a ${category}? Se perderÃ¡ el progreso actual.)) {
        startGame();
      } else {
        // Revertir al botÃ³n anterior
        categoryBtns.forEach(btn => {
          if (btn.dataset.category === currentCategory) {
            btn.classList.add("active");
          }
        });
      }
    } else {
      startGame();
    }
  }
  
  // Finalizar juego
  function endGame() {
    clearInterval(timer);
    gameStarted = false;
    
    const level = parseInt(levelSelect.value);
    const timeScore = Math.max(0, 5000 - (seconds * 10));
    const movesScore = Math.max(0, 3000 - (moves * 20));
    const totalScore = timeScore + movesScore + (level * 1000);
    
    modalTitle.textContent = "Â¡Felicidades! ğŸ‰";
    modalText.innerHTML = `
      <div style="margin-bottom: 15px;">
        <strong>Â¡Completaste el nivel ${level}!</strong><br>
        <small>CategorÃ­a: ${currentCategory}</small>
      </div>
      <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
        <div>Movimientos: <b>${moves}</b></div>
        <div>Tiempo: <b>${formatTime(seconds)}</b></div>
        <div>PuntuaciÃ³n: <b style="color:#fbbf24">${totalScore.toLocaleString()}</b></div>
      </div>
      <div>Prueba otra categorÃ­a o reinicia para jugar otra vez.</div>
    `;
    
    modal.classList.add("show");
  }
  
  // Voltear carta
  function flipCard(card, img) {
    if (lockBoard || card.classList.contains("flipped") || card.classList.contains("matched")) {
      return;
    }
    
    if (!gameStarted) {
      gameStarted = true;
      timer = setInterval(() => {
        seconds++;
        timerEl.textContent = formatTime(seconds);
      }, 1000);
    }
    
    card.classList.add("flipped");
    
    if (!firstCard) {
      firstCard = { card, img };
      return;
    }
    
    lockBoard = true;
    moves++;
    movesEl.textContent = moves;
    
    if (firstCard.img === img) {
      matches++;
      updatePairs();
      
      setTimeout(() => {
        firstCard.card.classList.add("matched");
        card.classList.add("matched");
        firstCard = null;
        lockBoard = false;
        
        const level = parseInt(levelSelect.value);
        if (matches === levels[level].pairs) {
          setTimeout(endGame, 500);
        }
      }, 500);
    } else {
      setTimeout(() => {
        firstCard.card.classList.remove("flipped");
        card.classList.remove("flipped");
        firstCard = null;
        lockBoard = false;
      }, 1000);
    }
  }
  
  // Iniciar nuevo juego
  function startGame() {
    board.innerHTML = "";
    const level = parseInt(levelSelect.value);
    board.className = board level-${level};
    
    // Reiniciar variables
    firstCard = null;
    lockBoard = false;
    moves = 0;
    matches = 0;
    seconds = 0;
    gameStarted = false;
    
    // Actualizar UI
    movesEl.textContent = "0";
    timerEl.textContent = "00:00";
    updatePairs();
    
    // Detener timer anterior
    clearInterval(timer);
    
    // Obtener imÃ¡genes de la categorÃ­a actual
    const categoryImages = imageCategories[currentCategory];
    const levelImages = shuffleArray([...categoryImages]).slice(0, levels[level].pairs);
    const gameImages = shuffleArray([...levelImages, ...levelImages]);
    
    // Crear cartas
    gameImages.forEach((img, index) => {
      const card = document.createElement("div");
      card.className = "card";
      card.dataset.index = index;
      card.innerHTML = `
        <div class="card-inner">
          <div class="card-face card-back">?</div>
          <div class="card-face card-front">
            <img src="${img}" alt="Carta de memoria" loading="lazy">
          </div>
        </div>
      `;
      
      card.addEventListener("click", () => flipCard(card, img));
      board.appendChild(card);
    });
    
    // Ocultar modal si estÃ¡ visible
    modal.classList.remove("show");
  }
  
  // Cambiar nivel
  function changeLevel() {
    const level = parseInt(levelSelect.value);
    
    if (gameStarted && moves > 0) {
      if (confirm("Â¿Cambiar de nivel? Se perderÃ¡ el progreso actual.")) {
        startGame();
      } else {
        levelSelect.value = level === 1 ? "2" : level === 2 ? "3" : "1";
      }
    } else {
      startGame();
    }
  }
  
  // Event listeners para categorÃ­as
  categoryBtns.forEach(btn => {
    btn.addEventListener("click", () => {
      changeCategory(btn.dataset.category);
    });
  });
  
  // Otros event listeners
  restartBtn.addEventListener("click", startGame);
  levelSelect.addEventListener("change", changeLevel);
  closeModalBtn.addEventListener("click", () => {
    modal.classList.remove("show");
    startGame();
  });
  
  // Iniciar juego
  startGame();
});
</script>

</body>
</html>
