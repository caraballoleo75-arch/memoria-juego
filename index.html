<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Game 3 Niveles</title>

<style>
/* =================== CSS =================== */
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg,#0f172a,#020617);
  color: white;
  text-align: center;
  margin: 0;
  padding: 20px;
}

h1 { margin-bottom: 10px; }

.controls {
  margin: 10px 0 20px;
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
}

select, button {
  padding: 8px 14px;
  border-radius: 8px;
  border: none;
  font-size: 14px;
  cursor: pointer;
}

button {
  background: #fbbf24;
  font-weight: bold;
}

.status {
  margin-bottom: 15px;
  font-size: 14px;
}

.board {
  display: grid;
  gap: 12px;
  justify-content: center;
  margin: auto;
}

.board.level-1 { grid-template-columns: repeat(3, 100px); }
.board.level-2 { grid-template-columns: repeat(4, 100px); }
.board.level-3 { grid-template-columns: repeat(6, 90px); }

.card {
  width: 100px;
  height: 120px;
  perspective: 1000px;
  cursor: pointer;
}

.card-inner {
  width: 100%;
  height: 100%;
  transition: transform 0.6s;
  transform-style: preserve-3d;
}

.card.flipped .card-inner {
  transform: rotateY(180deg);
}

.card-face {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 10px;
  backface-visibility: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}

.card-back {
  background: linear-gradient(135deg,#6366f1,#9333ea);
  font-size: 36px;
}

.card-front {
  background: white;
  transform: rotateY(180deg);
}

.card-front img {
  width: 90%;
  height: 90%;
  object-fit: contain;
}

/* Modal */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.7);
  align-items: center;
  justify-content: center;
}

.modal.show { display: flex; }

.dialog {
  background: #020617;
  padding: 25px;
  border-radius: 15px;
  max-width: 320px;
}
</style>
</head>

<body>

<h1>ðŸ§  Memory Game</h1>

<div class="controls">
  <select id="levelSelect">
    <option value="1">Nivel FÃ¡cil (6)</option>
    <option value="2">Nivel Medio (12)</option>
    <option value="3" selected>Nivel DifÃ­cil (18)</option>
  </select>
  <button id="restartBtn">ðŸ”„ Reiniciar</button>
</div>

<div class="status">
  Movimientos: <span id="moves">0</span> |
  Tiempo: <span id="timer">00:00</span>
</div>

<div id="board" class="board level-3"></div>

<div id="modal" class="modal">
  <div class="dialog">
    <h2 id="modalTitle">Â¡Bienvenido!</h2>
    <p id="modalText">Encuentra todos los pares</p>
    <button id="closeModalBtn">Jugar</button>
  </div>
</div>

<script>
/* =================== JAVASCRIPT =================== */
document.addEventListener("DOMContentLoaded", () => {

  const board = document.getElementById("board");
  const levelSelect = document.getElementById("levelSelect");
  const restartBtn = document.getElementById("restartBtn");
  const movesEl = document.getElementById("moves");
  const timerEl = document.getElementById("timer");

  const modal = document.getElementById("modal");
  const modalTitle = document.getElementById("modalTitle");
  const modalText = document.getElementById("modalText");
  const closeModalBtn = document.getElementById("closeModalBtn");

  const images = [
    "https://cdn-icons-png.flaticon.com/128/1998/1998610.png",
    "https://cdn-icons-png.flaticon.com/128/1998/1998610.png",
    "https://cdn-icons-png.flaticon.com/128/1998/1998618.png",
    "https://cdn-icons-png.flaticon.com/128/1998/1998618.png",
    "https://cdn-icons-png.flaticon.com/128/3069/3069172.png",
    "https://cdn-icons-png.flaticon.com/128/3069/3069172.png",
    "https://cdn-icons-png.flaticon.com/128/3069/3069184.png",
    "https://cdn-icons-png.flaticon.com/128/3069/3069184.png",
    "https://cdn-icons-png.flaticon.com/128/3069/3069196.png",
    "https://cdn-icons-png.flaticon.com/128/3069/3069196.png",
    "https://cdn-icons-png.flaticon.com/128/3069/3069205.png",
    "https://cdn-icons-png.flaticon.com/128/3069/3069205.png",
    "https://cdn-icons-png.flaticon.com/128/3082/3082383.png",
    "https://cdn-icons-png.flaticon.com/128/3082/3082383.png",
    "https://cdn-icons-png.flaticon.com/128/3082/3082384.png",
    "https://cdn-icons-png.flaticon.com/128/3082/3082384.png",
    "https://cdn-icons-png.flaticon.com/128/3082/3082385.png",
    "https://cdn-icons-png.flaticon.com/128/3082/3082385.png"
  ];

  const levels = { 1: 6, 2: 12, 3: 18 };

  let first = null;
  let lock = false;
  let moves = 0;
  let matches = 0;
  let seconds = 0;
  let timer = null;

  function formatTime(s) {
    const m = String(Math.floor(s / 60)).padStart(2,"0");
    const sec = String(s % 60).padStart(2,"0");
    return `${m}:${sec}`;
  }

  function shuffle(arr) {
    return arr.sort(() => Math.random() - 0.5);
  }

  function endGame() {
    clearInterval(timer);
    modalTitle.textContent = "Â¡Ganaste! ðŸŽ‰";
    modalText.innerHTML = `Movimientos: <b>${moves}</b><br>Tiempo: <b>${formatTime(seconds)}</b>`;
    modal.classList.add("show");
  }

  function flip(card, img) {
    if (lock || card.classList.contains("flipped")) return;

    card.classList.add("flipped");

    if (!first) {
      first = { card, img };
      return;
    }

    lock = true;
    moves++;
    movesEl.textContent = moves;

    if (first.img === img) {
      matches++;
      first = null;
      lock = false;
      if (matches === levels[levelSelect.value] / 2) endGame();
    } else {
      setTimeout(() => {
        first.card.classList.remove("flipped");
        card.classList.remove("flipped");
        first = null;
        lock = false;
      }, 800);
    }
  }

  function startGame() {
    board.innerHTML = "";
    board.className = `board level-${levelSelect.value}`;
    moves = 0;
    matches = 0;
    seconds = 0;
    movesEl.textContent = "0";
    timerEl.textContent = "00:00";
    clearInterval(timer);

    timer = setInterval(() => {
      seconds++;
      timerEl.textContent = formatTime(seconds);
    }, 1000);

    const selected = shuffle([...images]).slice(0, levels[levelSelect.value]);

    selected.forEach(img => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <div class="card-inner">
          <div class="card-face card-back">?</div>
          <div class="card-face card-front">
            <img src="${img}">
          </div>
        </div>`;
      card.onclick = () => flip(card, img);
      board.appendChild(card);
    });
  }

  restartBtn.onclick = startGame;
  closeModalBtn.onclick = () => {
    modal.classList.remove("show");
    startGame();
  };

  modal.classList.add("show");
});
</script>

</body>
</html>
